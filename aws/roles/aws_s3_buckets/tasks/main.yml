---
# tasks file for aws_s3_buckets

- name: Create S3 bucket
  amazon.aws.s3_bucket:
    name: "{{ s3_bucket_name }}"
    region: "{{ s3_region }}"
    state: "{{ s3_state }}"
    versioning: "{{ s3_versioning }}"
    encryption: "{{ s3_encryption }}"
    encryption_key_id: "{{ s3_kms_key_id }}"
    public_access:
      block_public_acls: "{{ s3_block_public_acls }}"
      block_public_policy: "{{ s3_block_public_policy }}"
      ignore_public_acls: "{{ s3_ignore_public_acls }}"
      restrict_public_buckets: "{{ s3_restrict_public_buckets }}"
    tags: "{{ s3_tags }}"
  register: s3_result

- name: Display S3 bucket information
  ansible.builtin.debug:
    msg:
      - "S3 Bucket: {{ s3_bucket_name }}"
      - "Region: {{ s3_region }}"
      - "Versioning: {{ s3_versioning }}"
      - "Encryption: {{ s3_encryption }}"
