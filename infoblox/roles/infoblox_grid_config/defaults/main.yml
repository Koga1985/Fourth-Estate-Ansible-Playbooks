---
# defaults file for infoblox_grid_config
# Infoblox Grid Configuration defaults for Fourth Estate

# Grid connection settings
infoblox_grid_master: "infoblox-master.example.com"
infoblox_username: "admin"
infoblox_password: "{{ vault_infoblox_password }}"
infoblox_wapi_version: "2.12"
infoblox_max_retries: 5
infoblox_validate_certs: true

# Grid properties
infoblox_grid_name: "fourth-estate-grid"
infoblox_grid_comment: "Fourth Estate Infoblox DDI Grid"

# NTP configuration
infoblox_configure_ntp: true
infoblox_ntp_servers:
  - "0.north-america.pool.ntp.org"
  - "1.north-america.pool.ntp.org"
  - "time.nist.gov"
infoblox_time_zone: "America/New_York"

# SNMP configuration
infoblox_enable_snmp: true
infoblox_snmp_version: "v3"
infoblox_snmp_community: "{{ vault_infoblox_snmp_community }}"
infoblox_snmp_contact: "netops@fourthestate.example.com"
infoblox_snmp_location: "Fourth Estate Data Center - Primary"
infoblox_snmp_engine_id: ""

# SNMP trap destinations
infoblox_snmp_trap_destinations:
  - destination: "siem.example.com"
    version: "v3"
    port: 162
    state: present

# Grid members (examples - customize per deployment)
infoblox_grid_members:
  - hostname: "infoblox-member-01.example.com"
    vip_address: "10.100.10.11"
    subnet_mask: "255.255.255.0"
    gateway: "10.100.10.1"
    enable_dns: true
    enable_dhcp: true
    enable_ha: false
    platform: "VNIOS"
    comment: "DNS/DHCP member - Zone 1"
    recursion: true
    minimal_response: false
  - hostname: "infoblox-member-02.example.com"
    vip_address: "10.100.20.11"
    subnet_mask: "255.255.255.0"
    gateway: "10.100.20.1"
    enable_dns: true
    enable_dhcp: true
    enable_ha: false
    platform: "VNIOS"
    comment: "DNS/DHCP member - Zone 2"
    recursion: true

# Admin users
infoblox_admin_users:
  - username: "netops_admin"
    password: "{{ vault_infoblox_netops_password }}"
    admin_groups:
      - "super-users"
    comment: "Network Operations Administrator"
    enable_2fa: true
    email: "netops@example.com"
    state: present
  - username: "security_admin"
    password: "{{ vault_infoblox_security_password }}"
    admin_groups:
      - "security-admins"
    comment: "Security Administrator"
    enable_2fa: true
    email: "security@example.com"
    state: present
  - username: "readonly_user"
    password: "{{ vault_infoblox_readonly_password }}"
    admin_groups:
      - "read-only"
    comment: "Read-only monitoring account"
    enable_2fa: false
    email: "monitoring@example.com"
    state: present

# Certificate management
infoblox_upload_certificate: false
infoblox_certificate_path: ""
infoblox_private_key_path: ""
infoblox_certificate_usage: "ADMIN_HTTPS"

# Syslog servers for audit logging (365+ day retention)
infoblox_syslog_servers:
  - address: "syslog.example.com"
    port: 514
    protocol: "tcp"
    facility: "local7"
    severity: "info"
    state: present
  - address: "backup-syslog.example.com"
    port: 514
    protocol: "tcp"
    facility: "local7"
    severity: "info"
    state: present

# Email notification settings
infoblox_configure_smtp: true
infoblox_smtp_server: "smtp.example.com"
infoblox_smtp_port: 587
infoblox_smtp_auth_enable: true
infoblox_smtp_username: "infoblox@example.com"
infoblox_smtp_password: "{{ vault_infoblox_smtp_password }}"
infoblox_smtp_from_address: "infoblox-noreply@example.com"

# Grid properties
infoblox_audit_log_format: "extended"

# Security settings
infoblox_admin_lockout_threshold: 5
infoblox_admin_lockout_duration: 30  # minutes
infoblox_min_password_length: 15
infoblox_password_expiry_days: 90
infoblox_min_tls_version: "TLSv1.2"
infoblox_cipher_suites:
  - "TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384"
  - "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256"
  - "TLS_DHE_RSA_WITH_AES_256_GCM_SHA384"

# Backup configuration
infoblox_configure_backup: true
infoblox_backup_server: "backup.example.com"
infoblox_backup_protocol: "sftp"
infoblox_backup_path: "/backups/infoblox"
infoblox_backup_username: "infoblox_backup"
infoblox_backup_password: "{{ vault_infoblox_backup_password }}"
infoblox_backup_schedule: "0 2 * * *"  # Daily at 2 AM
infoblox_backup_retention_days: 90

# Fourth Estate specific settings
# Source protection network isolation
infoblox_source_protection_enabled: true
# Separate grid members for different security zones
infoblox_zone_separation: true
