---
# defaults file for infoblox_dhcp_config
# Infoblox DHCP Service Configuration defaults for Fourth Estate

# Grid connection settings
infoblox_grid_master: "infoblox-master.example.com"
infoblox_username: "admin"
infoblox_password: "{{ vault_infoblox_password }}"
infoblox_wapi_version: "2.12"
infoblox_validate_certs: true

# Global DHCP settings
infoblox_enable_dhcp: true
infoblox_enable_dhcp_thresholds: true
infoblox_dhcp_authority: true
infoblox_dhcp_email_list:
  - "netops@example.com"
  - "dhcp-alerts@example.com"
infoblox_enable_dhcp_email_warnings: true
infoblox_enable_dhcp_snmp_warnings: true

# DHCP Failover Pairs for High Availability
infoblox_dhcp_failover_pairs:
  - name: "zone1-dhcp-failover"
    comment: "DHCP failover for Zone 1 - Staff Network"
    primary_server: "infoblox-member-01.example.com"
    secondary_server: "infoblox-member-02.example.com"
    failover_port: 647
    max_response_delay: 60
    max_unacked_updates: 10
    mclt: 3600  # Maximum Client Lead Time
    load_balance_split: 128  # 50/50 split
    state: present
  - name: "zone2-dhcp-failover"
    comment: "DHCP failover for Zone 2 - Journalist Network"
    primary_server: "infoblox-member-03.example.com"
    secondary_server: "infoblox-member-04.example.com"
    failover_port: 647
    max_response_delay: 60
    max_unacked_updates: 10
    mclt: 3600
    load_balance_split: 128
    state: present

# Custom DHCP Options
infoblox_dhcp_custom_options:
  - name: "custom-option-252"
    code: 252
    type: "text"
    comment: "Custom proxy auto-config URL"
    state: present

# Global DHCP Options
infoblox_configure_global_dhcp_options: true
infoblox_dhcp_domain_name: "fourthestate.example.com"
infoblox_dhcp_dns_servers:
  - "10.100.10.11"
  - "10.100.20.11"
infoblox_dhcp_default_gateway: "10.100.10.1"
infoblox_dhcp_ntp_servers:
  - "10.100.10.15"
  - "10.100.20.15"

# DHCP MAC Address Filters (for security zones)
infoblox_dhcp_mac_filters:
  - mac_address: "00:11:22:33:44:55"
    comment: "Approved device - Executive laptop"
    is_registered_user: true
    state: present

# DHCP Fingerprint Filters (for device classification)
infoblox_dhcp_fingerprint_filters:
  - name: "Windows-10-Filter"
    comment: "Windows 10 devices"
    device_class: "Windows"
    vendor_id: "MSFT 5.0"
    state: present
  - name: "iOS-Filter"
    comment: "iOS mobile devices"
    device_class: "iOS"
    vendor_id: "dhcpcd"
    state: present

# DHCP Lease Time Settings
infoblox_dhcp_default_lease_time: 86400  # 24 hours
infoblox_dhcp_pxe_lease_time: 300        # 5 minutes for PXE boot

# Fixed Address Reservations
infoblox_dhcp_reservations:
  - ip_address: "10.100.10.50"
    mac_address: "aa:bb:cc:dd:ee:01"
    hostname: "printer-01.example.com"
    comment: "Network printer - Floor 1"
    state: present
  - ip_address: "10.100.10.51"
    mac_address: "aa:bb:cc:dd:ee:02"
    hostname: "printer-02.example.com"
    comment: "Network printer - Floor 2"
    state: present
  - ip_address: "10.100.10.100"
    mac_address: "aa:bb:cc:dd:ee:10"
    hostname: "conference-room-av.example.com"
    comment: "Conference room AV system"
    state: present

# DHCP Relay Agents
infoblox_dhcp_relay_agents:
  - name: "relay-zone3"
    comment: "DHCP relay for Zone 3"
    servers:
      - "10.100.10.11"
      - "10.100.20.11"
    state: present

# PXE Boot Configuration
infoblox_enable_pxe_boot: false
infoblox_pxe_boot_server: ""
infoblox_pxe_boot_file: ""

# Dynamic DNS (DDNS) Integration
infoblox_enable_ddns: true
infoblox_ddns_domain: "dynamic.fourthestate.example.com"
infoblox_ddns_generate_hostname: true
infoblox_ddns_server_always_updates: true
infoblox_ddns_ttl: 3600
infoblox_ddns_update_fixed_addresses: false

# DHCP Logging and Audit
infoblox_enable_dhcp_audit_log: true
infoblox_log_dhcp_lease_events: true
infoblox_enable_fingerprint_tracking: true

# DHCP Threshold Monitoring
infoblox_dhcp_threshold_emails:
  - "netops@example.com"
  - "capacity-planning@example.com"
infoblox_dhcp_threshold_warning: 80   # Alert at 80% utilization
infoblox_dhcp_threshold_critical: 90  # Critical at 90% utilization

# IPv6 DHCP (DHCPv6)
infoblox_enable_dhcpv6: false
infoblox_dhcpv6_options: []

# Fourth Estate specific DHCP settings
# Journalist DHCP pools configuration
infoblox_journalist_dhcp_enabled: true

# Source protection network DHCP isolation
infoblox_source_protection_dhcp_enabled: true

# DHCP scope design for security zones
infoblox_security_zone_dhcp_separation: true

# DHCP lease tracking for security analysis
infoblox_dhcp_lease_tracking_enabled: true

# Integration with SIEM for DHCP events
infoblox_dhcp_siem_integration: true
