---
- hosts: localhost
  gather_facts: false
  roles:
    - role: vcenter_content_library
      vars:
        vcenter_hostname: "vcenter.example.local"
        vcenter_username: "{{ lookup('env','VCENTER_USERNAME') }}"
        vcenter_password: "{{ lookup('env','VCENTER_PASSWORD') }}"
        vcenter_validate_certs: false
        libraries:
          - { name: "LocalLib", type: local, datastore: "vsanDatastore", publication: { published: true, allow_subscribe: true } }
          - { name: "UpstreamLib", type: subscribed, subscription_url: "https://publisher.example.com/lib.json", automatic_sync: true }
        library_items:
          - { library: "LocalLib", name: "ubuntu-22.04-base", file: "/files/ubuntu.ova", state: present }
        sync_subscribed: true
