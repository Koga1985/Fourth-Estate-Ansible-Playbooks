---
# Canary â†’ waves; maintenance windows enforced.
- name: Ensure artifacts dir
  ansible.builtin.file:
    path: "{{ artifacts_dir | default('/tmp/ot-artifacts') }}"
    state: directory
    mode: "0755"

- name: Enforce maintenance window
  ansible.builtin.assert:
    that: [ maintenance_window | default(false) | bool ]
    fail_msg: "Patching blocked: maintenance_window must be true."

- name: Execute patch rings (placeholder)
  ansible.builtin.copy:
    dest: "{{ artifacts_dir }}/hmi_patch_rings_{{ inventory_hostname }}.txt"
    mode: "0644"
    content: "Applied ring per schedule (placeholder)."
