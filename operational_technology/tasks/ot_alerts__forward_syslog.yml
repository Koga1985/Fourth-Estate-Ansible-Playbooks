---
# Relay in syslog/CEF.
- name: Ensure artifacts dir
  ansible.builtin.file:
    path: "{{ artifacts_dir | default('/tmp/ot-artifacts') }}"
    state: directory
    mode: "0755"

- name: Guard syslog relay
  ansible.builtin.assert:
    that: [ syslog.host is defined ]
    fail_msg: "syslog.host required."

- name: Queue syslog batch (placeholder)
  ansible.builtin.copy:
    dest: "{{ artifacts_dir }}/syslog_batch_queued.txt"
    mode: "0644"
    content: "Queued {% raw %}{ (alerts | default([])) | length }{% endraw %} events for syslog relay."
