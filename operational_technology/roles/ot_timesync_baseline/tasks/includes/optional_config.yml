---
- name: Ensure artifacts dir
  ansible.builtin.file:
    path: "{{ artifacts_dir | default('/tmp/ot-artifacts') }}"
    state: directory
    mode: "0755"

- name: Guard write operations (maintenance window + dry_run)
  ansible.builtin.assert:
    that:
      - maintenance_window | default(false) | bool
      - not (dry_run | default(true) | bool)
    fail_msg: "Write operations blocked: enable maintenance_window=true and dry_run=false to push time config."
- name: Apply time config (placeholder)
  ansible.builtin.debug:
    msg: "Would update NTP/PTP config using vars: {{ timesources | default([]) }}"
