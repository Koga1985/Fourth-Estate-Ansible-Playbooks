---
- name: Ensure artifacts dir
  ansible.builtin.file:
    path: "{{ artifacts_dir | default('/tmp/ot-artifacts') }}"
    state: directory
    mode: "0755"

- name: Register asset
  ansible.builtin.uri:
    url: "{{ api.url }}{{ api.paths.assets | default('/assets') }}"
    method: POST
    headers: { "Authorization": "{{ api.token }}", "Content-Type": "application/json" }
    body_format: json
    body: "{{ asset | default({}) }}"
    status_code: 200,201,409
