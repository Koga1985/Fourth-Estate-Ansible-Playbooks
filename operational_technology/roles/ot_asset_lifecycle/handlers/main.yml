---
# OT Asset Lifecycle - Handlers

- name: Refresh asset inventory
  ansible.builtin.uri:
    url: "{{ ot_asset_api_url }}/inventory/refresh"
    method: POST
    headers:
      Authorization: "Bearer {{ ot_asset_api_token }}"
    validate_certs: "{{ ot_asset_verify_ssl }}"
    status_code: [200, 202]
  when:
    - ot_asset_api_token is defined
    - ot_asset_api_token | length > 0

- name: Update CMDB sync
  ansible.builtin.debug:
    msg: "CMDB sync triggered for asset lifecycle changes"

- name: Notify stakeholders
  ansible.builtin.debug:
    msg: "Sending notifications to {{ ot_asset_notification_recipients | join(', ') }}"
  when: ot_asset_notification_recipients | length > 0

- name: Generate compliance report
  ansible.builtin.debug:
    msg: "Generating compliance report for asset lifecycle events"

- name: Backup asset database
  ansible.builtin.debug:
    msg: "Triggering asset database backup"
