---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: {{ item.k8s_service_account }}
  namespace: {{ item.k8s_namespace }}
  annotations:
    iam.gke.io/gcp-service-account: {{ item.gcp_service_account }}@{{ gcp_project_id }}.iam.gserviceaccount.com
  labels:
    app.kubernetes.io/managed-by: ansible
    fourth-estate.io/compliance: "{{ 'fedramp' if gcp_iam_fedramp_mode else 'standard' }}"
    fourth-estate.io/workload-type: "{{ item.workload_type | default('general') }}"
