[Service]
# Fourth Estate specific overrides
# Generated by Ansible - DO NOT EDIT MANUALLY

# Increase startup timeout for large clusters
TimeoutStartSec=900

# Ensure proper shutdown
TimeoutStopSec=300

# Restart policy
Restart=on-failure
RestartSec=30s

# Resource limits
{% if elasticsearch_bootstrap_memory_lock %}
LimitMEMLOCK=infinity
{% endif %}

# Security hardening
NoNewPrivileges=true
PrivateDevices=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths={{ elasticsearch_data_paths | join(' ') }} {{ elasticsearch_log_dir }} {{ elasticsearch_pid_dir }} {{ elasticsearch_backup_dir }}

# Nice level (lower = higher priority, range -20 to 19)
Nice=-5

# I/O scheduling (best-effort, priority 0-7, lower = higher)
IOSchedulingClass=best-effort
IOSchedulingPriority=2
