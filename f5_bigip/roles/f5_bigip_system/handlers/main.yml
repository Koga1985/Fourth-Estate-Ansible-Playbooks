---
# F5 BIG-IP System Configuration Handlers
# Fourth Estate Production Standards

- name: Save F5 Configuration
  f5networks.f5_modules.bigip_config:
    provider: "{{ f5_bigip_provider }}"
    save: true
  tags:
    - f5_system
    - f5_save

- name: Reload F5 Configuration
  f5networks.f5_modules.bigip_command:
    provider: "{{ f5_bigip_provider }}"
    commands:
      - "load sys config"
  tags:
    - f5_system
    - f5_reload

- name: Sync F5 Configuration to Group
  f5networks.f5_modules.bigip_configsync_action:
    provider: "{{ f5_bigip_provider }}"
    device_group: "{{ f5_bigip_device_group | default('device-group-1') }}"
    sync_device_to_group: true
  when:
    - f5_bigip_ha_enabled is defined
    - f5_bigip_ha_enabled | bool
  tags:
    - f5_system
    - f5_ha
    - f5_sync
