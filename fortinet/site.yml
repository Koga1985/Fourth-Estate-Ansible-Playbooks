---
# Fortinet Deployment Playbook
# Entry point for FortiGate firewall automation
#
# Usage:
#   ansible-galaxy collection install -r requirements.yml
#   ansible-playbook -i inventory site.yml --ask-vault-pass

- name: FortiGate Configuration
  hosts: fortigate
  gather_facts: false

  vars:
    deploy_system: true
    deploy_interfaces: true

  tasks:
    - name: Phase 1 - System Configuration
      ansible.builtin.include_role:
        name: fortigate_system_config
      when: deploy_system | bool
      tags: ['system', 'phase1']

    - name: Phase 2 - Interface Configuration
      ansible.builtin.include_role:
        name: fortigate_interfaces
      when: deploy_interfaces | bool
      tags: ['interfaces', 'phase2']

    - name: Display summary
      ansible.builtin.debug:
        msg:
          - "=== FortiGate Deployment Complete ==="
          - "HA Mode: {{ fortios_ha_mode | default('a-p') }}"
      tags: ['always']
