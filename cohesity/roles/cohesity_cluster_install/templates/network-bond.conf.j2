# Network bonding configuration for Cohesity node
# Generated by Ansible

auto bond0
iface bond0 inet static
    address {{ item.ip_address }}
    netmask {{ cohesity_cluster_subnet_mask }}
    gateway {{ cohesity_cluster_gateway }}
    dns-nameservers {{ cohesity_cluster_dns_servers | join(' ') }}
    bond-mode {{ cohesity_network_config.bond_mode }}
    bond-miimon 100
    bond-downdelay 200
    bond-updelay 200
    bond-slaves eth0 eth1
    mtu {{ cohesity_network_config.mtu_size }}

# VLAN interfaces
auto bond0.{{ cohesity_network_config.data_vlan_id }}
iface bond0.{{ cohesity_network_config.data_vlan_id }} inet manual
    vlan-raw-device bond0
    mtu {{ cohesity_network_config.mtu_size }}

auto bond0.{{ cohesity_network_config.management_vlan_id }}
iface bond0.{{ cohesity_network_config.management_vlan_id }} inet manual
    vlan-raw-device bond0
    mtu 1500
