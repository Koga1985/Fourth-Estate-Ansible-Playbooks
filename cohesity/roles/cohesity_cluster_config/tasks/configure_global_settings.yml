---
# Configure global cluster settings
- name: Configure cluster preferences
  ansible.builtin.uri:
    url: "{{ cohesity_api_protocol }}://{{ cohesity_cluster_vip }}/irisservices/api/v1/public/cluster"
    method: PUT
    headers:
      Authorization: "Bearer {{ cohesity_api_token }}"
    body_format: json
    body:
      bannerEnabled: "{{ cohesity_global_settings.enable_banner_message }}"
      banner: "{{ cohesity_global_settings.banner_message }}"
      enablePatchManagement: "{{ cohesity_global_settings.enable_patch_management }}"
      timezone: "{{ cohesity_global_settings.timezone }}"
      languageLocale: "{{ cohesity_global_settings.language }}"
      fipsMode: "{{ cohesity_cluster_preferences.enable_fips_mode }}"
    validate_certs: "{{ cohesity_api_verify_ssl }}"
    status_code: 200
