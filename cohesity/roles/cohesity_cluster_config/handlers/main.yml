---
# handlers file for cohesity_cluster_config

- name: restart cluster services
  ansible.builtin.uri:
    url: "{{ cohesity_api_protocol }}://{{ cohesity_cluster_vip }}/irisservices/api/v1/public/cluster/restart"
    method: POST
    headers:
      Authorization: "Bearer {{ cohesity_api_token }}"
    validate_certs: "{{ cohesity_api_verify_ssl }}"
    status_code: [200, 202]
  listen: restart cohesity cluster

- name: reload cluster configuration
  ansible.builtin.uri:
    url: "{{ cohesity_api_protocol }}://{{ cohesity_cluster_vip }}/irisservices/api/v1/public/cluster/config/reload"
    method: POST
    headers:
      Authorization: "Bearer {{ cohesity_api_token }}"
    validate_certs: "{{ cohesity_api_verify_ssl }}"
    status_code: [200, 202]
  listen: reload configuration
