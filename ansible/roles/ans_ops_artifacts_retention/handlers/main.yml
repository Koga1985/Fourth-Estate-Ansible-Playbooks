---
# Handlers for ans_ops_artifacts_retention
- name: Restart automation controller
  ansible.builtin.service:
    name: automation-controller
    state: restarted
  listen: "restart controller"
  when: ansible_facts.services['automation-controller.service'] is defined

- name: Clear cache
  ansible.builtin.command:
    cmd: awx-manage clear_cache
  listen: "clear cache"
  changed_when: true

- name: Send notification
  ansible.builtin.debug:
    msg: "ans_ops_artifacts_retention tasks completed successfully"
  listen: "notify complete"
