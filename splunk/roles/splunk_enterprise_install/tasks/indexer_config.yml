---
# Indexer configuration tasks

- name: Configure indexer-specific settings
  ansible.builtin.blockinfile:
    path: "{{ splunk_home }}/etc/system/local/indexes.conf"
    block: |
      [default]
      maxDataSize = {{ splunk_max_data_size }}
      maxHotBuckets = {{ splunk_max_hot_buckets }}
      maxWarmDBCount = {{ splunk_max_warm_db_count }}
      frozenTimePeriodInSecs = {{ splunk_frozen_time_period_in_secs }}
    create: yes
    owner: "{{ splunk_user }}"
    group: "{{ splunk_group }}"
    mode: '0600'
  notify: restart splunk
  tags:
    - indexer
    - indexes
