---
# Search head configuration tasks

- name: Configure search head specific settings
  ansible.builtin.blockinfile:
    path: "{{ splunk_home }}/etc/system/local/limits.conf"
    block: |
      [search]
      max_concurrent_searches = {{ splunk_max_concurrent_searches }}
      max_searches_per_cpu = {{ splunk_max_searches_per_cpu }}
    create: yes
    owner: "{{ splunk_user }}"
    group: "{{ splunk_group }}"
    mode: '0600'
  notify: restart splunk
  tags:
    - search_head
    - limits
