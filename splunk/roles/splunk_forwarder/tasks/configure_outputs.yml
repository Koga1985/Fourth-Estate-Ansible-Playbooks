---
# Configure outputs to indexers

- name: Configure indexer connections
  ansible.builtin.copy:
    dest: "{{ splunk_forwarder_home }}/etc/system/local/outputs.conf"
    content: |
      [tcpout]
      defaultGroup = primary_indexers
      maxQueueSize = {{ splunk_forwarder_queue_size }}

      [tcpout:primary_indexers]
      server = {{ splunk_indexers | join(',') }}
      sslVerifyServerCert = {{ splunk_forwarder_ssl_verify | lower }}
      useACK = true
      compressed = true
