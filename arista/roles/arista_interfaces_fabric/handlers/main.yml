---
# handlers file for arista_interfaces_fabric

- name: save eos configuration
  arista.eos.eos_config:
    save_when: always
  listen: save eos configuration

- name: verify mlag status
  arista.eos.eos_command:
    commands:
      - show mlag
  register: mlag_status
  listen: save eos configuration
  when: mlag_config.enabled | default(false)

- name: verify vxlan status
  arista.eos.eos_command:
    commands:
      - show vxlan vtep
      - show vxlan vni
  register: vxlan_status
  listen: save eos configuration
  when: vxlan_config.enabled | default(false)
