---
# handlers file for arista_backup_restore

- name: save backup to git
  ansible.builtin.shell: |
    cd {{ backup_dir }}
    git add .
    git commit -m "{{ backup_git.commit_message }}"
    {% if backup_git.push_to_remote %}git push origin {{ backup_git.branch }}{% endif %}
  delegate_to: localhost
  when: backup_git.enabled | default(false)
  listen: save backup to git
  ignore_errors: true
