# Prometheus Recording Rules
# Managed by Ansible - Fourth Estate Agency
# {{ ansible_managed }}

groups:
  - name: {{ item.name }}
    interval: 30s
    rules:
{% for rule in item.rules %}
      - record: {{ rule.record }}
        expr: |
          {{ rule.expr | indent(10) }}
{% if rule.labels is defined %}
        labels:
{% for key, value in rule.labels.items() %}
          {{ key }}: '{{ value }}'
{% endfor %}
{% endif %}
{% endfor %}
