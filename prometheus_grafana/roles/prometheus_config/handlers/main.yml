---
# Prometheus Configuration Role - Handlers
# Fourth Estate Agency - Infrastructure Monitoring

- name: validate prometheus config
  command: "{{ prometheus_install_dir }}/promtool check config {{ prometheus_config_dir }}/prometheus.yml"
  changed_when: false

- name: reload prometheus
  systemd:
    name: prometheus
    state: reloaded
  failed_when: false

- name: restart prometheus
  systemd:
    name: prometheus
    state: restarted
    daemon_reload: true
