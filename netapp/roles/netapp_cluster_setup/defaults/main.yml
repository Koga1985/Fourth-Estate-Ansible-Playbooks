---
# defaults file for netapp_cluster_setup
# NetApp ONTAP Cluster Configuration Defaults
# Fourth Estate Production Environment

# Connection settings
netapp_cluster_hostname: "{{ vault_netapp_cluster_hostname | default('netapp-cluster.example.com') }}"
netapp_cluster_username: "{{ vault_netapp_cluster_username | default('admin') }}"
netapp_cluster_password: "{{ vault_netapp_cluster_password }}"
netapp_cluster_validate_certs: true
netapp_cluster_install_collection: false

# Cluster basic configuration
netapp_cluster_name: "netapp-cluster-prod"
netapp_cluster_contact: "Fourth Estate Storage Team <storage@agency.gov>"
netapp_cluster_location: "Primary Data Center - Secure Facility"

# DNS configuration
netapp_cluster_configure_dns: true
netapp_cluster_dns_domains:
  - "agency.gov"
  - "internal.agency.gov"
netapp_cluster_dns_nameservers:
  - "10.0.1.10"
  - "10.0.1.11"

# NTP configuration
netapp_cluster_configure_ntp: true
netapp_cluster_ntp_servers:
  - "ntp1.agency.gov"
  - "ntp2.agency.gov"
  - "0.us.pool.ntp.org"
  - "1.us.pool.ntp.org"

# Timezone configuration
netapp_cluster_timezone: "America/New_York"

# Cluster nodes
netapp_cluster_nodes:
  - "netapp-01"
  - "netapp-02"

# Node settings
netapp_cluster_configure_node_settings: false
netapp_cluster_node_settings:
  - node: "netapp-01"
    location: "Rack A1"
    asset_tag: "NETAPP-01-2024"
  - node: "netapp-02"
    location: "Rack A2"
    asset_tag: "NETAPP-02-2024"

# Aggregate configuration
netapp_cluster_create_aggregates: true
netapp_cluster_aggregate_encryption: true
netapp_cluster_aggregates:
  - name: "aggr1_netapp01_SAS"
    nodes:
      - "netapp-01"
    disk_count: 24
    raid_type: "raid_dp"
    raid_size: 16
    encryption: true
    is_mirrored: false
  - name: "aggr1_netapp02_SAS"
    nodes:
      - "netapp-02"
    disk_count: 24
    raid_type: "raid_dp"
    raid_size: 16
    encryption: true
    is_mirrored: false

# Disk assignment
netapp_cluster_configure_disk_assignment: true
netapp_cluster_disk_autoassign: "on"

# High Availability
netapp_cluster_enable_ha: true

# Management LIF configuration
netapp_cluster_configure_mgmt_lif: false
netapp_cluster_mgmt_lif_name: "cluster_mgmt"
netapp_cluster_mgmt_home_port: "e0M"
netapp_cluster_mgmt_home_node: "netapp-01"
netapp_cluster_mgmt_ip: "10.0.1.100"
netapp_cluster_mgmt_netmask: "255.255.255.0"

# Broadcast domains
netapp_cluster_create_broadcast_domains: false
netapp_cluster_broadcast_domains:
  - name: "Data"
    mtu: 9000
    ipspace: "Default"
    ports:
      - "netapp-01:e0c"
      - "netapp-01:e0d"
      - "netapp-02:e0c"
      - "netapp-02:e0d"
  - name: "Intercluster"
    mtu: 9000
    ipspace: "Default"
    ports:
      - "netapp-01:e0e"
      - "netapp-02:e0e"

# Intercluster LIFs for replication
netapp_cluster_create_intercluster_lifs: false
netapp_cluster_intercluster_lifs:
  - name: "intercluster_1"
    home_port: "e0e"
    home_node: "netapp-01"
    address: "192.168.1.10"
    netmask: "255.255.255.0"
  - name: "intercluster_2"
    home_port: "e0e"
    home_node: "netapp-02"
    address: "192.168.1.11"
    netmask: "255.255.255.0"

# Cluster peering for DR/replication
netapp_cluster_configure_peer: false
netapp_cluster_peer_relationships: []
#  - source_intercluster_lifs:
#      - "192.168.1.10"
#      - "192.168.1.11"
#    dest_intercluster_lifs:
#      - "192.168.2.10"
#      - "192.168.2.11"
#    passphrase: "{{ vault_cluster_peer_passphrase }}"
#    dest_hostname: "netapp-dr-cluster.example.com"
#    dest_username: "admin"
#    dest_password: "{{ vault_netapp_dr_password }}"
#    encryption_protocol: "tls_psk"

# AutoSupport configuration (DISA STIG requirement for monitoring)
netapp_cluster_configure_autosupport: true
netapp_cluster_autosupport_mail_hosts:
  - "smtp.agency.gov"
netapp_cluster_autosupport_noteto:
  - "storage-alerts@agency.gov"
  - "soc@agency.gov"
netapp_cluster_autosupport_from: "netapp-cluster@agency.gov"
netapp_cluster_autosupport_support: false  # Disable phone-home to NetApp (air-gapped env)
netapp_cluster_autosupport_transport: "smtp"

# SNMP configuration for monitoring
netapp_cluster_configure_snmp: true
netapp_cluster_snmp_community: "{{ vault_netapp_snmp_community | default('public') }}"
netapp_cluster_snmp_access_control: "ro"
netapp_cluster_snmp_traphosts:
  - "10.0.10.50"  # SNMP trap receiver / monitoring server
  - "10.0.10.51"

# Service Processor (SP) network configuration
netapp_cluster_configure_sp: false
netapp_cluster_sp_network:
  - node: "netapp-01"
    dhcp: "none"
    ip_address: "10.0.2.10"
    netmask: "255.255.255.0"
    gateway: "10.0.2.1"
  - node: "netapp-02"
    dhcp: "none"
    ip_address: "10.0.2.11"
    netmask: "255.255.255.0"
    gateway: "10.0.2.1"

# License configuration
netapp_cluster_configure_licenses: false
netapp_cluster_licenses: []
# Licenses should be stored in vault:
# - "{{ vault_netapp_license_nfs }}"
# - "{{ vault_netapp_license_cifs }}"
# - "{{ vault_netapp_license_iscsi }}"
# - "{{ vault_netapp_license_fcp }}"
# - "{{ vault_netapp_license_snapmirror }}"
# - "{{ vault_netapp_license_snapvault }}"
# - "{{ vault_netapp_license_flexclone }}"
# - "{{ vault_netapp_license_snaprestore }}"
# - "{{ vault_netapp_license_nve }}"

# Health verification
netapp_cluster_verify_health: true

# Debug mode
netapp_cluster_debug: false
