---
# Pure Storage FlashArray Configuration Defaults

# Array connection
flasharray_url: "https://{{ inventory_hostname }}"
# flasharray_api_token: defined in vault

# Array name
flasharray_name: "{{ inventory_hostname_short }}-fa"

# Session timeout (minutes)
flasharray_idle_timeout: 30

# Login banner
flasharray_login_banner: |
  WARNING: Authorized Access Only
  This system is for authorized use only. All activity is logged and monitored.
  Unauthorized access is prohibited and will be prosecuted.
  Fourth Estate Property - Unauthorized access prohibited

# SNMP v3 monitoring
# flasharray_snmp_managers:
#   - name: "monitoring-server-1"
#     version: "v3"
#     user: "snmpuser"
#     auth_protocol: "SHA"
#     auth_passphrase: "{{ snmp_auth_pass }}"  # in vault
#     privacy_protocol: "AES"
#     privacy_passphrase: "{{ snmp_priv_pass }}"  # in vault
#     host: "10.0.0.100"

# SNMP v2c (legacy, if required)
# flasharray_snmp_v2_managers:
#   - name: "legacy-monitor"
#     community: "{{ snmp_community }}"  # in vault
#     host: "10.0.0.101"

# Active Directory integration
flasharray_ad_enabled: false
# flasharray_ad_servers:
#   - "ldaps://dc1.example.com"
#   - "ldaps://dc2.example.com"
# flasharray_ad_base_dn: "DC=example,DC=com"
# flasharray_ad_bind_user: "CN=svc-flasharray,OU=Service Accounts,DC=example,DC=com"
# flasharray_ad_bind_password: "{{ flasharray_ad_password }}"  # in vault

# LDAP integration
flasharray_ldap_enabled: false
# flasharray_ldap_servers:
#   - "ldaps://ldap1.example.com"
#   - "ldaps://ldap2.example.com"
# flasharray_ldap_base_dn: "dc=example,dc=com"
# flasharray_ldap_bind_user: "cn=svc-flasharray,ou=services,dc=example,dc=com"
# flasharray_ldap_bind_password: "{{ flasharray_ldap_password }}"  # in vault

# Directory service role mappings
# flasharray_ds_roles:
#   - role: "array_admin"
#     group: "CN=Storage Admins,OU=Groups,DC=example,DC=com"
#     group_base: "DC=example,DC=com"
#   - role: "storage_admin"
#     group: "CN=Storage Operators,OU=Groups,DC=example,DC=com"
#     group_base: "DC=example,DC=com"
#   - role: "readonly"
#     group: "CN=Storage Viewers,OU=Groups,DC=example,DC=com"
#     group_base: "DC=example,DC=com"

# SAML SSO configuration
flasharray_saml_enabled: false
# flasharray_saml_name: "corporate-sso"
# flasharray_saml_idp_url: "https://sso.example.com/idp"
# flasharray_saml_metadata_url: "https://sso.example.com/metadata"
# flasharray_saml_cert: /path/to/idp-certificate.pem

# Multi-admin approval (requires 2+ admins for sensitive operations)
flasharray_multi_admin_enabled: true

# API clients for automation
# flasharray_api_clients:
#   - name: "ansible-automation"
#     role: "array_admin"
#   - name: "terraform-provisioning"
#     role: "storage_admin"
#   - name: "monitoring-readonly"
#     role: "readonly"

# SMTP configuration
flasharray_smtp_sender_domain: "{{ domain_name | default('example.com') }}"
flasharray_smtp_relay_host: "{{ smtp_relay | default('smtp.example.com') }}"
# flasharray_smtp_user: smtp_user  # if authentication required
# flasharray_smtp_password: "{{ smtp_password }}"  # in vault

# Alert recipients
flasharray_alert_recipients:
  - address: "storage-alerts@{{ domain_name | default('example.com') }}"
    enabled: true
    severity:
      - "info"
      - "warning"
      - "critical"
  - address: "storage-oncall@{{ domain_name | default('example.com') }}"
    enabled: true
    severity:
      - "critical"

# Syslog servers
flasharray_syslog_servers:
  - address: "{{ syslog_server_1 | default('10.0.0.50') }}"
    port: 514
    protocol: "tcp"
  - address: "{{ syslog_server_2 | default('10.0.0.51') }}"
    port: 514
    protocol: "tcp"

# SSL certificate
# flasharray_ssl_certificate: /path/to/certificate.crt
# flasharray_ssl_key: /path/to/private.key
# flasharray_ssl_passphrase: defined in vault (if encrypted)

# NTP configuration
flasharray_ntp_servers:
  - "{{ ntp_server_1 | default('10.0.0.10') }}"
  - "{{ ntp_server_2 | default('10.0.0.11') }}"
# flasharray_ntp_key: "{{ ntp_auth_key }}"  # in vault, if using authenticated NTP
# flasharray_ntp_key_id: 1

# Phone home (Pure1 support connection)
flasharray_phonehome_enabled: true

# Support proxy
flasharray_support_proxy_enabled: false
# flasharray_support_proxy_host: proxy.example.com
# flasharray_support_proxy_port: 3128

# SafeMode (immutable snapshots for ransomware protection)
flasharray_safemode_enabled: true

# Audit log retention
flasharray_audit_retention_days: 365

# Fourth Estate specific
flasharray_organization: "Fourth Estate"
flasharray_compliance_mode: "high-security"
flasharray_data_classification: "confidential"
flasharray_backup_location: "offsite-dr"

# Security settings
flasharray_min_tls_version: "1.2"
flasharray_fips_mode: true
flasharray_secure_erase_enabled: true
