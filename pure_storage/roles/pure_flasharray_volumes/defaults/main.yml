---
# Pure Storage FlashArray Volume Management Defaults

# Array connection
flasharray_url: "https://{{ inventory_hostname }}"
# flasharray_api_token: defined in vault

# Standard volumes
# flasharray_volumes:
#   - name: "vol-web-01"
#     size: 1T
#   - name: "vol-db-01"
#     size: 5T
#   - name: "vol-app-01"
#     size: 2T

# Volumes with QoS limits
# flasharray_volumes_with_qos:
#   - name: "vol-test-01"
#     size: 500G
#     bandwidth_limit: 100M  # 100 MB/s
#     iops_limit: 1000       # 1000 IOPS
#   - name: "vol-dev-01"
#     size: 1T
#     qos: "dev-qos-policy"

# Volume groups (for consistent snapshots)
# flasharray_volume_groups:
#   - name: "vg-database-prod"
#   - name: "vg-application-tier"
#   - name: "vg-web-cluster"

# Assign volumes to volume groups
# flasharray_vg_volumes:
#   - vg_name: "vg-database-prod"
#     volume_name: "vol-db-01"
#   - vg_name: "vg-database-prod"
#     volume_name: "vol-db-02"

# Manual snapshots
# flasharray_volume_snapshots:
#   - volume: "vol-db-01"
#     suffix: "before-upgrade"
#   - volume: "vg-database-prod"
#     suffix: "pre-maintenance"

# Volume clones
# flasharray_volume_clones:
#   - name: "vol-db-01-clone"
#     source: "vol-db-01.before-upgrade"
#   - name: "vol-test-refresh"
#     source: "vol-prod-app"
#     overwrite: true

# QoS policies for volumes
# flasharray_volume_qos:
#   - name: "vol-production-01"
#     qos_policy: "production-high"
#   - name: "vol-test-01"
#     qos_policy: "test-limited"

# Volume tags for organization
# flasharray_volume_tags:
#   - volume: "vol-db-01"
#     key: "environment"
#     value: "production"
#   - volume: "vol-db-01"
#     key: "application"
#     value: "oracle"
#   - volume: "vol-db-01"
#     key: "department"
#     value: "editorial"

# Volume resize operations
# flasharray_volume_resize:
#   - name: "vol-db-01"
#     new_size: 6T

# Instant copies (zero-copy clones)
# flasharray_instant_copies:
#   - source_volume: "vol-prod-cms"
#     clone_name: "vol-dev-cms"
#   - source_volume: "vol-prod-db"
#     clone_name: "vol-test-db"

# Volume promotions from snapshots
# flasharray_volume_promotions:
#   - volume: "vol-db-01"
#     snapshot: "vol-db-01.pre-incident"

# Volumes to delete (24-hour eradication window)
# flasharray_volumes_to_delete:
#   - "vol-old-app-01"
#   - "vol-decom-web-01"

# Volumes to eradicate immediately
# flasharray_volumes_to_eradicate:
#   - "vol-temp-test-01"

# Volumes to recover from deletion
# flasharray_volumes_to_recover:
#   - "vol-accidentally-deleted"

# Fourth Estate production volumes
flasharray_production_volumes:
  - name: "vol-cms-production"
    size: 10T
    description: "Content Management System storage"
  - name: "vol-media-archive"
    size: 50T
    description: "Media archive storage"
  - name: "vol-database-editorial"
    size: 5T
    description: "Editorial database"
  - name: "vol-publishing-system"
    size: 8T
    description: "Publishing system storage"
  - name: "vol-evidence-preservation"
    size: 20T
    description: "Evidence and source material preservation"

# Default QoS settings
flasharray_default_qos:
  production_high:
    bandwidth_limit: 10G
    iops_limit: 100000
  production_medium:
    bandwidth_limit: 5G
    iops_limit: 50000
  test_environment:
    bandwidth_limit: 1G
    iops_limit: 10000

# Snapshot retention defaults
flasharray_snapshot_retention:
  short_term: 7  # days
  medium_term: 30  # days
  long_term: 365  # days (Fourth Estate compliance)
  evidence_preservation: 2555  # 7 years

# Volume naming convention
flasharray_volume_prefix: "vol"
flasharray_volume_naming_pattern: "{{ flasharray_volume_prefix }}-{{ application }}-{{ environment }}-{{ sequence }}"

# Thin provisioning (always enabled on Pure)
flasharray_thin_provisioning: true

# Data reduction (inline dedup and compression)
flasharray_inline_reduction: true
flasharray_expected_reduction_ratio: "5:1"  # Typical for Fourth Estate workloads

# Encryption (always enabled)
flasharray_volume_encryption: true  # AES-256

# Performance settings
flasharray_default_block_size: "4K"  # For databases and VMs
flasharray_sequential_workload_hint: false

# Capacity management
flasharray_volume_overprovisioning_ratio: 3  # Thin provisioning ratio
flasharray_capacity_alert_threshold: 80  # percent
flasharray_capacity_critical_threshold: 90  # percent

# Fourth Estate specific
flasharray_evidence_volumes_immutable: true
flasharray_source_protection_enabled: true
flasharray_ransomware_protection: true  # SafeMode snapshots
