---
# Pure Storage FlashArray Installation Handlers

- name: flasharray installation complete
  ansible.builtin.debug:
    msg: "FlashArray {{ flasharray_name }} installation and initial configuration complete"

- name: restart management services
  ansible.builtin.command: /bin/true
  changed_when: false

- name: verify array connectivity
  purefa_info:
    fa_url: "{{ flasharray_url }}"
    api_token: "{{ flasharray_api_token }}"
    gather_subset:
      - minimum
  register: verify_result
  failed_when: verify_result is failed
