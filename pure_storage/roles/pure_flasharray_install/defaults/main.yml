---
# Pure Storage FlashArray Installation Defaults

# Array connection
flasharray_url: "https://{{ inventory_hostname }}"
# flasharray_api_token: defined in vault

# Array identification
flasharray_name: "{{ inventory_hostname_short }}-fa"

# Management network
flasharray_management_interfaces:
  - name: "ct0.eth0"
    address: "{{ ansible_host }}"
    netmask: "255.255.255.0"
    gateway: "{{ ansible_default_ipv4.gateway | default('') }}"
    mtu: 1500
  - name: "ct1.eth0"
    address: "{{ ansible_host | regex_replace('\\d+$', (ansible_host.split('.')[-1] | int + 1) | string) }}"
    netmask: "255.255.255.0"
    mtu: 1500

# DNS configuration
flasharray_dns_domain: "{{ domain_name | default('example.com') }}"
flasharray_dns_servers:
  - "{{ dns_server_1 | default('10.0.0.10') }}"
  - "{{ dns_server_2 | default('10.0.0.11') }}"

# NTP configuration
flasharray_ntp_servers:
  - "{{ ntp_server_1 | default('10.0.0.10') }}"
  - "{{ ntp_server_2 | default('10.0.0.11') }}"

# Timezone
flasharray_timezone: "America/New_York"

# SSL certificate
# flasharray_ssl_certificate: /path/to/certificate.crt
# flasharray_ssl_key: /path/to/private.key
# flasharray_ssl_passphrase: defined in vault (if needed)

# Phone home (support connection)
flasharray_phonehome_enabled: true

# Support proxy
flasharray_support_proxy_enabled: false
# flasharray_support_proxy_host: proxy.example.com
# flasharray_support_proxy_port: 3128

# SMTP configuration for alerts
flasharray_smtp_enabled: true
flasharray_smtp_sender_domain: "{{ domain_name | default('example.com') }}"
flasharray_smtp_relay_host: "{{ smtp_relay | default('smtp.example.com') }}"

# Alert recipients
flasharray_alert_recipients:
  - "storage-alerts@{{ domain_name | default('example.com') }}"

# Syslog servers
flasharray_syslog_servers:
  - address: "{{ syslog_server_1 | default('10.0.0.50') }}"
    port: 514
    protocol: "tcp"
  - address: "{{ syslog_server_2 | default('10.0.0.51') }}"
    port: 514
    protocol: "tcp"

# Directory service roles (configured after AD/LDAP setup)
# flasharray_directory_roles:
#   - role: "array_admin"
#     group: "CN=Storage Admins,OU=Groups,DC=example,DC=com"
#     group_base: "DC=example,DC=com"
#   - role: "storage_admin"
#     group: "CN=Storage Operators,OU=Groups,DC=example,DC=com"
#     group_base: "DC=example,DC=com"

# Admin users (initial setup only)
# flasharray_admin_users:
#   - name: "backup_admin"
#     password: "{{ flasharray_backup_admin_password }}"  # in vault
#     role: "array_admin"

# Session timeout (minutes)
flasharray_idle_timeout: 30

# Automatic updates
flasharray_auto_update: false

# Fourth Estate specific settings
flasharray_organization: "Fourth Estate"
flasharray_location: "{{ datacenter_name | default('DC1') }}"
flasharray_contact: "storage-team@{{ domain_name | default('example.com') }}"

# Compliance and security
flasharray_fips_mode: true
flasharray_audit_retention_days: 365
flasharray_secure_erase_enabled: true

# Pure1 cloud monitoring
flasharray_pure1_enabled: true
