---
# Pure Storage FlashArray Performance Defaults

# Array connection
flasharray_url: "https://{{ inventory_hostname }}"
# flasharray_api_token: defined in vault

# QoS policies
# flasharray_qos_policies:
#   - name: "production-high"
#     bandwidth_limit: 10G
#     iops_limit: 100000
#   - name: "production-medium"
#     bandwidth_limit: 5G
#     iops_limit: 50000
#   - name: "test-limited"
#     bandwidth_limit: 1G
#     iops_limit: 10000
#   - name: "dev-constrained"
#     bandwidth_limit: 500M
#     iops_limit: 5000

# Volume QoS limits
# flasharray_volume_qos_limits:
#   - volume: "vol-test-01"
#     bandwidth_limit: 1G
#     iops_limit: 10000
#   - volume: "vol-dev-database"
#     bandwidth_limit: 500M
#     iops_limit: 5000

# Host group QoS
# flasharray_hostgroup_qos:
#   - hostgroup: "test-environment"
#     bandwidth_limit: 2G
#     iops_limit: 20000
#   - hostgroup: "dev-cluster"
#     bandwidth_limit: 1G
#     iops_limit: 10000

# High-performance volumes (no limits)
# flasharray_high_performance_volumes:
#   - "vol-production-db"
#   - "vol-oltp-system"
#   - "vol-cms-platform"

# Performance alert recipients
# flasharray_performance_alert_recipients:
#   - address: "storage-performance@example.com"
#   - address: "storage-oncall@example.com"

# Latency alert recipients
# flasharray_latency_alert_recipients:
#   - address: "storage-alerts@example.com"

# Performance thresholds
flasharray_performance_thresholds:
  latency_normal_us: 500  # Sub-millisecond (500 Âµs)
  latency_warning_us: 1000  # 1 ms
  latency_critical_us: 5000  # 5 ms
  iops_baseline: 50000
  iops_warning: 80000
  iops_critical: 100000
  bandwidth_baseline_mbps: 5000  # 5 GB/s
  bandwidth_warning_mbps: 8000  # 8 GB/s
  bandwidth_critical_mbps: 10000  # 10 GB/s

# Performance monitoring intervals
flasharray_monitoring_interval_seconds: 60
flasharray_performance_history_days: 90
flasharray_detailed_monitoring_enabled: true

# Workload optimization
flasharray_workload_profiles:
  database:
    block_size: "8K"
    io_pattern: "random"
    read_write_ratio: "70:30"
    expected_iops: 50000
  virtual_machines:
    block_size: "4K"
    io_pattern: "mixed"
    read_write_ratio: "80:20"
    expected_iops: 30000
  big_data:
    block_size: "1M"
    io_pattern: "sequential"
    read_write_ratio: "90:10"
    expected_throughput_gbps: 8
  cms_platform:
    block_size: "4K"
    io_pattern: "random"
    read_write_ratio: "60:40"
    expected_iops: 40000

# NVMe configuration
flasharray_nvme_enabled: true
flasharray_nvme_queue_depth: 1024
flasharray_nvme_io_queues: 128
flasharray_nvme_performance_boost: true

# Data reduction
flasharray_inline_deduplication: true
flasharray_inline_compression: true
flasharray_pattern_removal: true
flasharray_expected_reduction_ratio: "5:1"
flasharray_reduction_monitoring: true

# Cache and tiering (automatic on Pure)
flasharray_intelligent_caching: true
flasharray_write_coalescing: true
flasharray_read_ahead_enabled: true

# Queue depth optimization
flasharray_iscsi_queue_depth: 128
flasharray_fc_queue_depth: 128
flasharray_nvme_queue_depth: 1024

# Performance tuning
flasharray_enable_performance_tuning: true
flasharray_auto_performance_optimization: true
flasharray_workload_balancing: "automatic"

# Capacity forecasting
flasharray_capacity_forecasting_enabled: true
flasharray_forecast_period_days: 180
flasharray_growth_rate_tracking: true

# Fourth Estate performance requirements
flasharray_fourth_estate_performance:
  editorial_systems:
    target_latency_us: 500
    target_iops: 40000
    target_throughput_gbps: 4
  cms_platform:
    target_latency_us: 500
    target_iops: 50000
    target_throughput_gbps: 5
  media_archives:
    target_latency_ms: 5
    target_throughput_gbps: 8
    sequential_optimized: true
  publishing_systems:
    target_latency_us: 800
    target_iops: 35000
    target_throughput_gbps: 3

# Performance testing
flasharray_performance_testing_enabled: true
flasharray_baseline_performance_tests: true
flasharray_test_frequency_days: 90

# Monitoring integration
flasharray_send_metrics_to_prometheus: true
flasharray_send_metrics_to_grafana: true
flasharray_send_metrics_to_splunk: false
flasharray_pure1_monitoring: true

# Alert configuration
flasharray_performance_alerting_enabled: true
flasharray_latency_alerting: true
flasharray_iops_alerting: true
flasharray_throughput_alerting: true
flasharray_queue_depth_alerting: true

# Performance reports
flasharray_generate_performance_reports: true
flasharray_report_frequency: "weekly"
flasharray_report_recipients:
  - "storage-team@example.com"

# DirectFlash architecture
flasharray_directflash_modules: true
flasharray_directflash_performance: "maximum"

# All-flash performance characteristics
flasharray_sub_millisecond_latency: true
flasharray_consistent_performance: true
flasharray_no_performance_degradation: true

# Evergreen optimization
flasharray_evergreen_performance_upgrades: true
flasharray_non_disruptive_upgrades: true
