
- name: Configure directory services
  when: dirsvc is defined and dirsvc|length>0
  purestorage.flasharray.purefa_ds:
    fa_url: "{{ fa_url }}"
    api_token: "{{ api_token }}"
    directory_service: "{{ dirsvc.type }}"
    base_dn: "{{ dirsvc.base_dn }}"
    bind_user: "{{ dirsvc.bind_user }}"
    bind_password: "{{ dirsvc.bind_password }}"
    servers: "{{ dirsvc.servers }}"
    use_tls: "{{ dirsvc.use_tls | default(true) }}"
    state: present
