---
# vars example:
# ac_pods:
#   - name: pod-app01
#     target: fa-remote01
#     witness: "witness.purestorage.com"   # optional if using Pure1 Cloud Mediator
- name: Create/Stretch pods for ActiveCluster
  purestorage.flasharray.purefa_pod:
    fa_url: "{{ fa_url }}"
    api_token: "{{ api_token }}"
    pod: "{{ item.name }}"
    target: "{{ item.target | default(omit) }}"
    stretch: true
    state: present
  loop: "{{ ac_pods | default([]) }}"
  loop_control: { label: "{{ item.name }}" }

- name: (Optional) Configure witness/mediator (best-effort placeholder)
  when: item.witness is defined
  ansible.builtin.debug:
    msg: "Configure witness '{{ item.witness }}' for pod {{ item.name }} (configure via array GUI/REST if module not available)."
  loop: "{{ ac_pods | default([]) }}"
  loop_control: { label: "{{ item.name }}" }
