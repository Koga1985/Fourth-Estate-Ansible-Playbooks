---
# vars:
# cert_bundle: { cert: "/etc/pki/tls/certs/fa.crt", key: "/etc/pki/tls/private/fa.key", chain: "/etc/pki/tls/certs/fa-chain.crt", common_name: "array.example.com" }
- name: Install HTTPS certificate bundle
  purestorage.flasharray.purefa_certificate:
    fa_url: "{{ fa_url }}"
    api_token: "{{ api_token }}"
    certificate: "{{ cert_bundle.cert }}"
    private_key: "{{ cert_bundle.key }}"
    ca_bundle: "{{ cert_bundle.chain | default(omit) }}"
    common_name: "{{ cert_bundle.common_name | default(omit) }}"
    state: present
