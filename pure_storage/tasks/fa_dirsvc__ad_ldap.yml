---
# vars:
# dirsvc: { type: ad, base_dn: "DC=corp,DC=example,DC=com", bind_user: "svc@corp.example.com", bind_password: "****", servers: ["ad1","ad2"], use_tls: true }
- name: Configure directory services
  purestorage.flasharray.purefa_ds:
    fa_url: "{{ fa_url }}"
    api_token: "{{ api_token }}"
    directory_service: "{{ dirsvc.type }}"
    base_dn: "{{ dirsvc.base_dn }}"
    bind_user: "{{ dirsvc.bind_user }}"
    bind_password: "{{ dirsvc.bind_password }}"
    servers: "{{ dirsvc.servers }}"
    use_tls: "{{ dirsvc.use_tls | default(true) }}"
    state: present
