
---
# create/assign Collection Groups & Collector Groups; balance load.
- name: Ensure artifacts dir
  ansible.builtin.file:
    path: "{{ artifacts_dir | default('/tmp/sl1-artifacts') }}"
    state: directory
    mode: "0755"

- name: Save desired collector groups (placeholder)
  ansible.builtin.copy:
    dest: "{{ artifacts_dir }}/collector_groups.json"
    mode: "0644"
    content: "{{ collector_groups | default([]) | to_nice_json }}"
- name: Save desired collection assignments (placeholder)
  ansible.builtin.copy:
    dest: "{{ artifacts_dir }}/collector_assignments.json"
    mode: "0644"
    content: "{{ assignments | default([]) | to_nice_json }}"
