---
- name: Upload branding logo
  ansible.builtin.uri:
    url: "{{ sl1.url }}/api/system/branding/logo"
    method: POST
    src: "{{ sl1_branding.logo_path }}"
    headers:
      X-EM7-API-Username: "{{ sl1.api_user }}"
      X-EM7-API-Password: "{{ sl1.api_password }}"
    validate_certs: "{{ sl1.verify_ssl }}"
    status_code: [200, 201]
  when:
    - sl1_branding.logo_path is defined
    - not dry_run

- name: Configure branding settings
  ansible.builtin.uri:
    url: "{{ sl1.url }}/api/system/branding"
    method: PUT
    body:
      login_page_title: "{{ sl1_branding.login_page_title }}"
      login_page_text: "{{ sl1_branding.login_page_text }}"
      color_scheme: "{{ sl1_branding.color_scheme }}"
    body_format: json
    headers:
      Content-Type: "application/json"
      X-EM7-API-Username: "{{ sl1.api_user }}"
      X-EM7-API-Password: "{{ sl1.api_password }}"
    validate_certs: "{{ sl1.verify_ssl }}"
    status_code: [200, 201]
  when: not dry_run
