---
- name: Ensure artifacts directory exists
  ansible.builtin.file:
    path: "{{ artifacts_dir }}"
    state: directory
    mode: "0755"

- name: Configure system settings
  import_tasks: tasks/10_system_settings.yml

- name: Configure SMTP
  import_tasks: tasks/20_smtp_config.yml
  when: sl1_smtp.enabled

- name: Configure SNMP trap receiver
  import_tasks: tasks/30_snmp_trap.yml
  when: sl1_snmp_trap.enabled

- name: Configure syslog receiver
  import_tasks: tasks/40_syslog.yml
  when: sl1_syslog.enabled

- name: Configure authentication
  import_tasks: tasks/50_authentication.yml

- name: Configure user accounts
  import_tasks: tasks/60_users.yml

- name: Configure organizations
  import_tasks: tasks/70_organizations.yml

- name: Configure API access
  import_tasks: tasks/80_api_config.yml
  when: sl1_api.enabled

- name: Configure branding
  import_tasks: tasks/85_branding.yml
  when: sl1_branding.enabled

- name: Configure backup
  import_tasks: tasks/90_backup.yml
  when: sl1_backup.enabled

- name: Configure log retention
  import_tasks: tasks/95_log_retention.yml

- name: Apply performance tuning
  import_tasks: tasks/98_performance_tuning.yml

- name: Configure database maintenance
  import_tasks: tasks/99_database_maintenance.yml
  when: sl1_database_maintenance.optimize_tables
