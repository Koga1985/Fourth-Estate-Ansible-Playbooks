---
- name: Configure static routes
  paloaltonetworks.panos.panos_static_route:
    name: "{{ item.destination }} via {{ item.nexthop | default('vr') }}"
    virtual_router: "{{ item.vr | default('default') }}"
    destination: "{{ item.destination }}"
    nexthop_type: "{{ item.nexthop_type | default('ip-address') }}"
    nexthop: "{{ item.nexthop | default(omit) }}"
    interface: "{{ item.interface | default(omit) }}"
    metric: "{{ item.metric | default(10) }}"
    template: "{{ template | default(omit) if pa_use_panorama | bool else omit }}"
    template_stack: "{{ template_stack | default(omit) if pa_use_panorama | bool else omit }}"
    state: present
  loop: "{{ static_routes | default([]) }}"
  loop_control: { label: "{{ item.destination }}" }
