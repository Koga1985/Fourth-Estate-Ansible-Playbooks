---
- name: Ensure zones and bind interfaces
  paloaltonetworks.panos.panos_zone:
    zone: "{{ item.zone }}"
    mode: "{{ item.mode | default('layer3') }}"
    interface: "{{ item.interfaces | default(omit) }}"
    device_group: "{{ device_group if pa_use_panorama | bool else omit }}"
    vsys: "{{ vsys if not (pa_use_panorama | bool) else omit }}"
    state: present
  loop: "{{ zones | default([]) }}"
  loop_control: { label: "{{ item.zone }}" }
