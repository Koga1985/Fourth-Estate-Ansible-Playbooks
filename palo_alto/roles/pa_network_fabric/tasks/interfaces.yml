---
- name: Configure L3 interfaces
  paloaltonetworks.panos.panos_interface:
    if_name: "{{ item.if_name }}"
    mode: "{{ item.mode | default('layer3') }}"
    ip: "{{ item.ip | default(omit) }}"
    comment: "{{ item.comment | default(omit) }}"
    template: "{{ template | default(omit) if pa_use_panorama | bool else omit }}"
    template_stack: "{{ template_stack | default(omit) if pa_use_panorama | bool else omit }}"
    state: present
  loop: "{{ interfaces | default([]) }}"
  loop_control: { label: "{{ item.if_name }}" }
