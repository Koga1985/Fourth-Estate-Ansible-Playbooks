---
- name: Ensure virtual routers and bind interfaces
  paloaltonetworks.panos.panos_virtual_router:
    name: "{{ item.name }}"
    interface: "{{ item.interfaces | default(omit) }}"
    template: "{{ template | default(omit) if pa_use_panorama | bool else omit }}"
    template_stack: "{{ template_stack | default(omit) if pa_use_panorama | bool else omit }}"
    state: present
  loop: "{{ virtual_routers | default([]) }}"
  loop_control: { label: "{{ item.name }}" }
