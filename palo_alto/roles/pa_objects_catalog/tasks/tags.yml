---
- name: Ensure tags
  paloaltonetworks.panos.panos_tag_object:
    name: "{{ item.name }}"
    color: "{{ item.color | default(omit) }}"
    comments: "{{ item.comments | default(omit) }}"
    device_group: "{{ device_group if pa_use_panorama | bool else omit }}"
    vsys: "{{ vsys if not (pa_use_panorama | bool) else omit }}"
    state: present
  loop: "{{ tags | default([]) }}"
  loop_control: { label: "{{ item.name }}" }
