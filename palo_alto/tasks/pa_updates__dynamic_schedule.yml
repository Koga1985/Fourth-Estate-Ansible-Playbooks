---
# Inputs:
#   du_schedule:
#     content: { recurring: "daily", at: "03:30" }
#     antivirus: { recurring: "hourly" }
#     wildfire: { recurring: "every-15-min" }
#     url_filtering: { recurring: "daily", at: "04:10" }
#   run_now: false

- name: Configure dynamic update schedule (PAN-OS)
  when: du_schedule is defined
  paloaltonetworks.panos.panos_dynamic_update_schedule:
    antivirus: "{{ du_schedule.antivirus | default(omit) }}"
    content: "{{ du_schedule.content | default(omit) }}"
    wildfire: "{{ du_schedule.wildfire | default(omit) }}"
    url_filtering: "{{ du_schedule.url_filtering | default(omit) }}"
    commit: false

- name: (Optional) Trigger content update now
  when: run_now | default(false) | bool
  paloaltonetworks.panos.panos_dynamic_updates:
    update_module: "all"
    install: true
    download: true
    skip_commit: true
