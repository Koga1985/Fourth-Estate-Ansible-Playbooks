---
# defaults file for ucs_prod_infrastructure
# Cisco UCS Production Infrastructure for Fourth Estate

# UCS Manager Connection
ucs_hostname: "{{ vault_ucs_hostname }}"
ucs_username: "{{ vault_ucs_username }}"
ucs_password: "{{ vault_ucs_password }}"
ucs_use_ssl: true
ucs_validate_certs: true

# Deployment Control
apply_changes: false
ucs_artifacts_dir: "/tmp/ucs-artifacts"

# Fourth Estate Configuration
fourth_estate_org_name: "FourthEstate"
fourth_estate_description: "Fourth Estate Organization - Free Press and Media"
fourth_estate_contact: "{{ vault_fourth_estate_contact }}"
fourth_estate_phone: "{{ vault_fourth_estate_phone }}"
fourth_estate_email: "{{ vault_fourth_estate_email }}"
fourth_estate_address: "{{ vault_fourth_estate_address }}"

# Sub-organizations
fourth_estate_sub_orgs:
  - name: "Production"
    description: "Production workload servers"
  - name: "Development"
    description: "Development and testing servers"
  - name: "Management"
    description: "Management and infrastructure servers"
  - name: "DMZ"
    description: "Demilitarized zone servers"

# UCS System Configuration
ucs_system_name: "UCS-FourthEstate"
ucs_system_description: "Fourth Estate UCS Domain"
ucs_timezone: "America/New_York"

# Feature Toggles
ucs_enable_ucsm_config: true
ucs_enable_org_setup: true
ucs_enable_service_profiles: true
ucs_enable_vnic_vhba: true
ucs_enable_server_pools: true
ucs_enable_address_pools: true
ucs_enable_firmware_mgmt: true
ucs_enable_chassis_discovery: true
ucs_enable_server_config: true
ucs_enable_ha: true
ucs_enable_san: true
ucs_enable_iscsi: false
ucs_enable_snmp: true
ucs_enable_firmware_updates: false
ucs_auto_associate_servers: false

# DNS Servers
ucs_dns_servers:
  - "8.8.8.8"
  - "8.8.4.4"

# NTP Servers (DoD approved)
ucs_ntp_servers:
  - "time.nist.gov"
  - "time-a-g.nist.gov"

# Call Home Configuration
ucs_callhome_enabled: true

# SNMP Configuration
ucs_snmp_communities:
  - community: "{{ vault_snmp_community }}"
    description: "Fourth Estate monitoring"

# Server Pools
ucs_server_pools:
  - name: "Production-Pool"
    description: "Production workload servers"
  - name: "Development-Pool"
    description: "Development and test servers"
  - name: "Management-Pool"
    description: "Management infrastructure"

# Server Pool Qualifications
ucs_server_pool_qualifications: []

# Power Groups
ucs_power_groups:
  - name: "Production-Power-Group"
    description: "Production server power management"

# UUID Pools
ucs_uuid_pools:
  - name: "UUID-Pool-Production"
    prefix: "derived"
    first_uuid: "0000-000000000001"
    last_uuid: "0000-000000000100"
    order: "sequential"
    description: "UUID pool for production servers"

# MAC Address Pools
ucs_mac_pools:
  - name: "MAC-Pool-A"
    first_addr: "00:25:B5:00:01:00"
    last_addr: "00:25:B5:00:01:FF"
    order: "sequential"
    description: "MAC pool for Fabric A"
  - name: "MAC-Pool-B"
    first_addr: "00:25:B5:00:02:00"
    last_addr: "00:25:B5:00:02:FF"
    order: "sequential"
    description: "MAC pool for Fabric B"

# WWNN Pools
ucs_wwnn_pools:
  - name: "WWNN-Pool"
    first_addr: "20:00:00:25:B5:00:00:00"
    last_addr: "20:00:00:25:B5:00:00:FF"
    order: "sequential"
    description: "WWNN pool for SAN connectivity"

# WWPN Pools (Fabric A)
ucs_wwpn_pools_a:
  - name: "WWPN-Pool-A"
    first_addr: "20:00:00:25:B5:0A:00:00"
    last_addr: "20:00:00:25:B5:0A:00:FF"
    order: "sequential"
    description: "WWPN pool for Fabric A"

# WWPN Pools (Fabric B)
ucs_wwpn_pools_b:
  - name: "WWPN-Pool-B"
    first_addr: "20:00:00:25:B5:0B:00:00"
    last_addr: "20:00:00:25:B5:0B:00:FF"
    order: "sequential"
    description: "WWPN pool for Fabric B"

# IQN Pools
ucs_iqn_pools:
  - name: "IQN-Pool"
    prefix: "iqn.2025-01.com.fourthestate"
    suffix_start: "0001"
    suffix_end: "0100"
    description: "IQN pool for iSCSI"

# Service Profile Templates
ucs_service_profile_templates:
  - name: "SPT-Production-Server"
    template_type: "updating-template"
    description: "Production server template"
    uuid_pool: "UUID-Pool-Production"
    bios_policy: "BIOS-Production"
    boot_policy: "Boot-Production"
    maint_policy: "Maint-UserAck"
    power_policy: "Power-Grid"
    local_disk_policy: "RAID1-LocalBoot"

# BIOS Policies
ucs_bios_policies:
  - name: "BIOS-Production"
    description: "Production BIOS policy with security hardening"
    reboot_on_update: "yes"

# Boot Policies
ucs_boot_policies:
  - name: "Boot-Production"
    description: "Boot from SAN or local disk"
    boot_mode: "uefi"
    enforce_vnic_name: "yes"
    reboot_on_update: "no"

# Maintenance Policies
ucs_maintenance_policies:
  - name: "Maint-UserAck"
    description: "User acknowledgment required for maintenance"
    uptime_disr: "user-ack"

# vNIC Templates
ucs_vnic_templates:
  - name: "vNIC-Production-A"
    fabric: "A"
    template_type: "updating-template"
    vlans: ["100", "200", "300"]
    mtu: "9000"
    mac_pool: "MAC-Pool-A"
  - name: "vNIC-Production-B"
    fabric: "B"
    template_type: "updating-template"
    vlans: ["100", "200", "300"]
    mtu: "9000"
    mac_pool: "MAC-Pool-B"

# vHBA Templates
ucs_vhba_templates:
  - name: "vHBA-Production-A"
    fabric: "A"
    vsan: "100"
    template_type: "updating-template"
    wwpn_pool: "WWPN-Pool-A"
  - name: "vHBA-Production-B"
    fabric: "B"
    vsan: "200"
    template_type: "updating-template"
    wwpn_pool: "WWPN-Pool-B"

# LAN Connectivity Policies
ucs_lan_connectivity_policies:
  - name: "LAN-Connectivity-Production"
    vnics:
      - name: "eth0"
        vnic_template: "vNIC-Production-A"
      - name: "eth1"
        vnic_template: "vNIC-Production-B"

# SAN Connectivity Policies
ucs_san_connectivity_policies:
  - name: "SAN-Connectivity-Production"
    wwnn_pool: "WWNN-Pool"
    vhbas:
      - name: "fc0"
        vhba_template: "vHBA-Production-A"
      - name: "fc1"
        vhba_template: "vHBA-Production-B"

# Host Firmware Packages
ucs_host_firmware_packages:
  - name: "FirmwarePkg-Production"
    blade_package: "4.2(3a)"
    rack_package: "4.2(3a)"
    update_trigger: "immediate"
    description: "Production firmware package"

# Service Profile Instances
ucs_service_profile_instances: []

# Power Policies
ucs_power_policies:
  - name: "Power-Grid"
    priority: "grid"
    description: "Grid power policy for production"

# Disk Group Policies
ucs_disk_group_policies:
  - name: "RAID1-LocalBoot"
    raid_level: "mirror"
    config_mode: "automatic"
    description: "RAID 1 for local boot"

# Chassis Discovery
ucs_chassis_link_aggregation: "port-channel"
ucs_chassis_num_links: "2"

# High Availability
ucs_backup_enabled: true
ucs_backup_type: "full-state"
ucs_backup_protocol: "scp"
ucs_backup_path: "/backups/ucs/{{ fourth_estate_org_name }}"
ucs_backup_server: "{{ vault_backup_server }}"
ucs_backup_username: "{{ vault_backup_username }}"
ucs_backup_password: "{{ vault_backup_password }}"

# Compliance Frameworks
compliance_frameworks:
  - "dod_stig"
  - "nist_800_53"
  - "nist_800_171"
  - "fisma_moderate"
  - "fisma_high"

# Fabric Interconnect Configuration
ucs_enable_fabric_interconnects: true
fi_cluster_mode: "ha"  # ha or standalone
fi_a_mgmt_ip: "{{ vault_fi_a_mgmt_ip | default('192.168.1.10') }}"
fi_b_mgmt_ip: "{{ vault_fi_b_mgmt_ip | default('192.168.1.11') }}"
fi_mgmt_subnet: "255.255.255.0"
fi_mgmt_gateway: "{{ vault_fi_mgmt_gateway | default('192.168.1.1') }}"

# Fabric Interconnect A - Server Ports (ports connected to servers)
fi_a_server_ports:
  - name: "server-port-1-1"
    slot: 1
    port: 1
  - name: "server-port-1-2"
    slot: 1
    port: 2

# Fabric Interconnect B - Server Ports
fi_b_server_ports:
  - name: "server-port-1-1"
    slot: 1
    port: 1
  - name: "server-port-1-2"
    slot: 1
    port: 2

# Fabric Interconnect A - Uplink Ports (ports connected to network)
fi_a_uplink_ports:
  - slot: 1
    port: 31
    type: "ethernet"
  - slot: 1
    port: 32
    type: "ethernet"

# Fabric Interconnect B - Uplink Ports
fi_b_uplink_ports:
  - slot: 1
    port: 31
    type: "ethernet"
  - slot: 1
    port: 32
    type: "ethernet"

# Fabric Interconnect A - Port Channels
fi_a_port_channels:
  - id: 10
    name: "uplink-pc-a"
    ports:
      - "1/31"
      - "1/32"

# Fabric Interconnect B - Port Channels
fi_b_port_channels:
  - id: 10
    name: "uplink-pc-b"
    ports:
      - "1/31"
      - "1/32"

# Service Profile Association Configuration
ucs_enable_sp_association: true
sp_association_mode: "auto"  # auto or manual

# Manual Association (when sp_association_mode is 'manual')
sp_manual_associations: []
# Example manual associations:
# sp_manual_associations:
#   - service_profile: "SP-Web-01"
#     server_dn: "sys/chassis-1/blade-1"
#   - service_profile: "SP-App-01"
#     server_dn: "sys/chassis-1/blade-2"

# Auto Association (when sp_association_mode is 'auto')
sp_server_pool_name: "FourthEstate-Pool"
sp_pool_servers: []
# Example pool servers:
# sp_pool_servers:
#   - server_dn: "sys/chassis-1/blade-1"
#   - server_dn: "sys/chassis-1/blade-2"
#   - server_dn: "sys/rack-unit-1"

# Service profile templates to enable for auto-association
sp_templates_for_auto_assoc: []
# Example templates:
# sp_templates_for_auto_assoc:
#   - "FourthEstate-Web-Template"
#   - "FourthEstate-App-Template"
