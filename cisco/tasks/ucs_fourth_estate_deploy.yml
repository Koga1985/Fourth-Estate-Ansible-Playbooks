---
# Cisco UCS Fourth Estate Production Deployment Task
# Quick deployment task file for inclusion in larger playbooks

- name: Deploy Cisco UCS for Fourth Estate
  block:
    - name: Validate UCS connection parameters
      ansible.builtin.assert:
        that:
          - ucs_hostname is defined
          - ucs_username is defined
          - ucs_password is defined
        fail_msg: "UCS connection parameters must be defined"

    - name: Run UCS Fourth Estate production deployment
      ansible.builtin.import_playbook: ../playbooks/ucs_fourth_estate_production.yml
      vars:
        apply_changes: "{{ ucs_apply_changes | default(false) }}"

  tags:
    - cisco
    - ucs
    - fourth_estate
