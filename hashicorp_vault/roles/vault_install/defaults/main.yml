---
# HashiCorp Vault Installation - Defaults
# Fourth Estate Production Configuration

# Vault version
vault_version: "1.15.4"
vault_enterprise: false
vault_license_path: ""

# Installation paths
vault_bin_path: "/usr/local/bin"
vault_config_path: "/etc/vault.d"
vault_data_path: "/opt/vault/data"
vault_tls_path: "/etc/vault.d/tls"
vault_plugin_path: "/etc/vault.d/plugins"
vault_log_path: "/var/log/vault"

# User and group
vault_user: "vault"
vault_group: "vault"
vault_uid: 8200
vault_gid: 8200

# Network configuration
vault_address: "0.0.0.0"
vault_port: 8200
vault_cluster_port: 8201
vault_api_addr: "https://{{ ansible_fqdn }}:8200"
vault_cluster_addr: "https://{{ ansible_default_ipv4.address }}:8201"

# TLS configuration
vault_tls_disable: false
vault_tls_cert_file: "{{ vault_tls_path }}/vault-cert.pem"
vault_tls_key_file: "{{ vault_tls_path }}/vault-key.pem"
vault_tls_ca_file: "{{ vault_tls_path }}/ca-cert.pem"
vault_tls_min_version: "tls13"
vault_tls_cipher_suites: ""
vault_tls_require_and_verify_client_cert: false
vault_tls_disable_client_certs: false

# Auto-unseal configuration
vault_seal_type: "awskms"  # Options: awskms, azurekeyvault, gcpckms, shamir
vault_awskms_region: "us-gov-west-1"
vault_awskms_kms_key_id: ""
vault_awskms_endpoint: ""
vault_azure_tenant_id: ""
vault_azure_client_id: ""
vault_azure_client_secret: ""
vault_azure_vault_name: ""
vault_azure_key_name: ""

# Storage backend (default: raft)
vault_storage_type: "raft"
vault_raft_node_id: "{{ ansible_hostname }}"
vault_raft_path: "{{ vault_data_path }}/raft"
vault_raft_performance_multiplier: 1
vault_raft_trailing_logs: 10000
vault_raft_snapshot_threshold: 8192
vault_raft_max_entry_size: 1048576

# Performance tuning
vault_disable_mlock: false
vault_disable_cache: false
vault_max_lease_ttl: "768h"
vault_default_lease_ttl: "768h"
vault_disable_clustering: false

# UI configuration
vault_ui: true

# Telemetry
vault_telemetry_enabled: true
vault_telemetry_statsd_address: "127.0.0.1:8125"
vault_telemetry_disable_hostname: false
vault_prometheus_retention_time: "24h"

# Service configuration
vault_service_enabled: true
vault_service_state: "started"

# Log configuration
vault_log_level: "info"  # trace, debug, info, warn, error
vault_log_format: "json"
vault_enable_syslog: true
vault_syslog_facility: "LOCAL0"

# FIPS 140-2 mode
vault_enable_fips: false

# Namespace configuration (Enterprise)
vault_enable_namespaces: false

# License (Enterprise)
vault_install_license: false
vault_license_content: ""

# Plugins
vault_install_plugins: []
# Example:
# vault_install_plugins:
#   - name: "vault-plugin-database-oracle"
#     url: "https://releases.hashicorp.com/vault-plugin-database-oracle/0.7.0/vault-plugin-database-oracle_0.7.0_linux_amd64.zip"
#     sha256: "..."

# System limits
vault_nofile_limit: 65536
vault_nproc_limit: 4096

# Firewall configuration
vault_configure_firewall: true
vault_firewall_allowed_ips: []

# SELinux
vault_selinux_enabled: true

# Backup configuration
vault_enable_backup: true
vault_backup_path: "/backup/vault"
vault_snapshot_interval: "1h"

# Air-gapped deployment
vault_air_gapped: false
vault_local_binary_path: ""

# Proxy configuration
vault_http_proxy: ""
vault_https_proxy: ""
vault_no_proxy: "localhost,127.0.0.1"

# Health check configuration
vault_health_check_interval: 30
vault_health_check_timeout: 10

# Additional configuration
vault_extra_config: {}
