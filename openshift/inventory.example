# OpenShift Inventory Example
# Copy this file to your inventory directory and customize

[localhost]
localhost ansible_connection=local ansible_python_interpreter=/usr/bin/python3

[localhost:vars]
# OpenShift API Authentication
# Use kubeconfig file or token-based authentication
ocp_api_url=https://api.cluster.example.com:6443
ocp_kubeconfig=~/.kube/config

# Or use token authentication (for service accounts)
# ocp_api_token={{ vault_ocp_api_token }}
# ocp_validate_certs=true

# Cluster identification
ocp_cluster_name=production
ocp_cluster_environment=prod

# --- Namespace Configuration ---
[ocp_namespaces:vars]
# Default namespace settings
namespace_quota_cpu=20
namespace_quota_memory=64Gi
namespace_limit_cpu=4
namespace_limit_memory=8Gi

# Namespace list to create
ocp_namespaces_list=["development", "staging", "production", "monitoring", "logging"]

# --- RBAC Configuration ---
[ocp_rbac:vars]
# LDAP/AD Group sync
enable_group_sync=true
ldap_sync_schedule="*/30 * * * *"
ldap_bind_dn={{ vault_ldap_bind_dn }}
ldap_bind_password={{ vault_ldap_bind_password }}
ldap_url=ldaps://ldap.example.com:636

# Default cluster roles
default_developer_role=edit
default_viewer_role=view
default_admin_role=admin

# --- Network Policies ---
[ocp_network:vars]
# Default network policy mode
network_policy_default_deny=true
enable_egress_firewall=true

# Ingress configuration
ingress_controller_replicas=3
enable_route_sharding=false

# --- Storage Configuration ---
[ocp_storage:vars]
# Default storage class
default_storage_class=gp3-csi
enable_odf=false

# PVC defaults
default_pvc_access_mode=ReadWriteOnce
default_pvc_size=10Gi

# --- Monitoring Configuration ---
[ocp_monitoring:vars]
# User workload monitoring
enable_user_workload_monitoring=true
prometheus_retention=15d
prometheus_storage_size=50Gi

# Alert manager
enable_alertmanager=true
alertmanager_replicas=3

# --- Logging Configuration ---
[ocp_logging:vars]
# Log forwarding
enable_log_forwarding=true
log_forward_type=elasticsearch
elasticsearch_url=https://elasticsearch.example.com:9200

# Log retention
log_retention_application=7d
log_retention_infrastructure=14d
log_retention_audit=30d

# --- GitOps Configuration ---
[ocp_gitops:vars]
# ArgoCD
enable_argocd=true
argocd_namespace=openshift-gitops
argocd_repo_url=https://github.com/example/gitops-repo.git

# --- Security Configuration ---
[ocp_security:vars]
# Pod Security Admission
psa_enforce_profile=restricted
psa_audit_profile=restricted
psa_warn_profile=restricted

# Image signing
enable_image_signature_verification=true
signature_store_url=https://sigstore.example.com

# Secrets management
enable_external_secrets=true
external_secrets_provider=vault
vault_url=https://vault.example.com

# --- Compliance Configuration ---
[ocp_compliance:vars]
# Compliance operator
enable_compliance_operator=true
compliance_scan_schedule="0 1 * * *"
compliance_profile=moderate

# Gatekeeper policies
enable_gatekeeper=true
gatekeeper_audit_interval=60
