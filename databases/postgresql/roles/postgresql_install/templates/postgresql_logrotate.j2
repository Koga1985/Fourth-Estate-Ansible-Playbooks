# {{ ansible_managed }}
# PostgreSQL log rotation configuration

{{ postgresql_log_directory }}/*.log {
    daily
    rotate 30
    missingok
    notifempty
    compress
    delaycompress
    sharedscripts
    copytruncate
    create 0640 postgres postgres
    su postgres postgres
    
    postrotate
        # Signal PostgreSQL to reopen log files
        /bin/kill -HUP `cat {{ postgresql_data_directory }}/postmaster.pid 2>/dev/null` 2>/dev/null || true
    endscript
}
