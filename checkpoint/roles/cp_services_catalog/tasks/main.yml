---
# Call L4/L7 service tasks, then optionally publish once.

- name: Create/Update L4 services (TCP/UDP)
  import_tasks: cp_services__create_l4.yml
  tags: [services, l4]

- name: Create/Update L7 services (Application/URL Categories)
  import_tasks: cp_services__create_l7.yml
  tags: [services, l7]

# Single publish at the end for efficiency
- name: Publish service catalog changes (role-level)
  when: publish_changes | bool
  check_point.mgmt.cp_mgmt_publish:
  tags: [services, publish]
